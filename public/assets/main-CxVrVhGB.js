import{t as na,c as ia,j as e,P as da,a as la,b as ca,D as Ea,r,d as h,S as C,e as ua,p as ma,f as Na,g as Ta,s as fa,h as pa,i as q,C as Ra,R as xa,k as Ia,l as ba,m as Z,n as J,o as ee,q as Aa,u as ae,I as te,v as se,w as re,x as ga,y as oe,z as Sa,L as ne,A as ie,B as ha,T as Ca,E as de,F as Oa,G as La,H as va,J as wa,K as Da,M as F,N as ya,O as ja,Q as Ma,U as Ua,V as Pa,W as _a,X as Ga,Y as Ba,Z as Ha,_ as Fa,$ as ka,a0 as Va,a1 as Ya,a2 as Wa,a3 as Xa,a4 as za,a5 as Ka,a6 as X,a7 as le,a8 as Qa,a9 as $a,aa as qa,ab as ce,ac as Ee,ad as ue,ae as me,af as Ne,ag as Te,ah as fe,ai as Za,aj as pe,ak as Re,al as xe,am as Ja,an as Ie,ao as be,ap as et,aq as at,ar as tt,as as Ae,at as st,au as rt,av as ot,aw as nt,ax as it,ay as dt,az as lt,aA as ct,aB as Et,aC as ut,aD as mt,aE as Nt,aF as Tt}from"./vendor-BdfPXdYJ.js";function n(...a){return na(ia(a))}const ft=({className:a,...t})=>e.jsx(da,{className:n("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",a),...t}),z=la,pt=({withHandle:a,className:t,...s})=>e.jsx(ca,{className:n("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...s,children:a&&e.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:e.jsx(Ea,{className:"h-2.5 w-2.5"})})}),Rt=h("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef(({className:a,variant:t,size:s,asChild:o=!1,...i},d)=>{const N=o?C:"button";return e.jsx(N,{className:n(Rt({variant:t,size:s,className:a})),ref:d,...i})});g.displayName="Button";const xt=1,It=1e6;let _=0;function bt(){return _=(_+1)%Number.MAX_SAFE_INTEGER,_.toString()}const G=new Map,K=a=>{if(G.has(a))return;const t=setTimeout(()=>{G.delete(a),v({type:"REMOVE_TOAST",toastId:a})},It);G.set(a,t)},At=(a,t)=>{switch(t.type){case"ADD_TOAST":return{...a,toasts:[t.toast,...a.toasts].slice(0,xt)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?K(s):a.toasts.forEach(o=>{K(o.id)}),{...a,toasts:a.toasts.map(o=>o.id===s||s===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(s=>s.id!==t.toastId)}}},D=[];let y={toasts:[]};function v(a){y=At(y,a),D.forEach(t=>{t(y)})}function gt({...a}){const t=bt(),s=i=>v({type:"UPDATE_TOAST",toast:{...i,id:t}}),o=()=>v({type:"DISMISS_TOAST",toastId:t});return v({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:i=>{i||o()}}}),{id:t,dismiss:o,update:s}}function k(){const[a,t]=r.useState(y);return r.useEffect(()=>(D.push(t),()=>{const s=D.indexOf(t);s>-1&&D.splice(s,1)}),[a]),{...a,toast:gt,dismiss:s=>v({type:"DISMISS_TOAST",toastId:s})}}const ge=window.sqlViewerConfig.path,St=async()=>{const a=await fetch(`${ge}/tables`);if(!a.ok)throw new Error("Ошибка при загрузке таблиц");return(await a.json()).tables},ht=async a=>{var o;const t=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"),s=await fetch(`${ge}/execute`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t||""},body:JSON.stringify({query:a})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Ошибка выполнения запроса")}return await s.json()},O=ua()(ma(a=>({theme:"light",setTheme:t=>a({theme:t}),query:"",setQuery:t=>a({query:t}),queryLimit:window.sqlViewerConfig.max_limit||10,setQueryLimit:t=>a({queryLimit:t}),queryResult:null,setQueryResult:t=>a({queryResult:t}),error:null,setError:t=>a({error:t}),tables:{},setTables:t=>a({tables:t})}),{name:"sql-viewer",storage:Na(()=>localStorage),partialize:a=>({theme:a.theme,query:a.query})})),Q=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BIGINT","BINARY","BLOB","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHAR","CHARACTER","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEC","DECIMAL","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FLOAT","FLOAT4","FLOAT8","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LONGBLOB","LONGTEXT","LOOP","LOW_PRIORITY","MATCH","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","NUMERIC","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","PRECISION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","REAL","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SMALLINT","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TINYBLOB","TINYINT","TINYTEXT","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VARBINARY","VARCHAR","VARCHARACTER","VARYING","WHEN","WHERE","WHILE","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Ct=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BIGINT","BINARY","BLOB","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHAR","CHARACTER","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEC","DECIMAL","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DOUBLE","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FLOAT","FLOAT4","FLOAT8","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LONGBLOB","LONGTEXT","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","NUMERIC","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","PARTITION","PRECISION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","REAL","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SMALLINT","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TINYBLOB","TINYINT","TINYTEXT","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VARBINARY","VARCHAR","VARCHARACTER","VARYING","VIRTUAL","WHEN","WHERE","WHILE","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Ot=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","ANALYZE","AND","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FOR","FOREIGN","FROM","FULL","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LEFT","LIKE","LIMIT","MATCH","NATURAL","NO","NOT","NOTNULL","NULL","OF","OFFSET","ON","OR","ORDER","OUTER","PLAN","PRAGMA","PRIMARY","QUERY","RAISE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RIGHT","ROLLBACK","ROW","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TO","TRANSACTION","TRIGGER","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WITH","WITHOUT"],Lt=["ABORT","ABSOLUTE","ACCESS","ACTION","ADD","ADMIN","AFTER","AGGREGATE","ALL","ALSO","ALTER","ALWAYS","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASSERTION","ASSIGNMENT","ASYMMETRIC","AT","ATTACH","ATTRIBUTE","AUTHORIZATION","BACKWARD","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BIT","BOOLEAN","BOTH","BY","CACHE","CALL","CALLED","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAIN","CHARACTER","CHARACTERISTICS","CHECK","CHECKPOINT","CLASS","CLOSE","CLUSTER","COALESCE","COLLATE","COLUMN","COMMENT","COMMENTS","COMMIT","CONCURRENTLY","CONNECTION","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","CONVERSION","COPY","COST","CREATE","CROSS","CSV","CUBE","CURRENT","CURSOR","CYCLE","DATA","DATABASE","DEFAULT","DEFAULTS","DEFERRABLE","DEFERRED","DEFINER","DELETE","DELIMITER","DELIMITERS","DEPENDS","DESC","DETACH","DICTIONARY","DISABLE","DISCARD","DISTINCT","DO","DOCUMENT","DOMAIN","DOUBLE","DROP","EACH","ELSE","ENABLE","ENCODING","ENCRYPTED","END","ENUM","ESCAPE","EVENT","EXCEPT","EXCLUDE","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXPLAIN","EXTENSION","EXTERNAL","EXTRACT","FALSE","FAMILY","FETCH","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FORCE","FOREIGN","FORWARD","FREEZE","FROM","FULL","FUNCTION","FUNCTIONS","GENERATED","GLOBAL","GRANT","GRANTED","GREATEST","GROUP","GROUPING","GROUPS","HANDLER","HAVING","HEADER","HOLD","IDENTITY","IF","ILIKE","IMMEDIATE","IMMUTABLE","IMPLICIT","IMPORT","IN","INCLUDE","INCLUDING","INCREMENT","INDEX","INDEXES","INHERIT","INHERITS","INITIALLY","INLINE","INNER","INOUT","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","INVOKER","IS","ISNULL","ISOLATION","JOIN","KEY","LABEL","LANGUAGE","LARGE","LAST","LATERAL","LEADING","LEAKPROOF","LEAST","LEFT","LEVEL","LIKE","LIMIT","LISTEN","LOAD","LOCAL","LOCALTIME","LOCALTIMESTAMP","LOCK","LOCKED","LOGGED","MAPPING","MATCH","MATERIALIZED","MAXVALUE","METHOD","MINVALUE","MODE","MOVE","NAME","NAMES","NATIONAL","NATURAL","NCHAR","NEW","NEXT","NO","NONE","NOT","NOTHING","NOTIFY","NOTNULL","NOWAIT","NULL","NULLIF","NULLS","NUMERIC","OBJECT","OF","OFF","OFFSET","OIDS","OLD","ON","ONLY","OPERATOR","OPTION","OPTIONS","OR","ORDER","ORDINALITY","OTHERS","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","OWNED","OWNER","PARALLEL","PARSER","PARTIAL","PARTITION","PASSING","PASSWORD","PLACING","PLANS","POLICY","POSITION","PRECEDING","PRECISION","PREPARE","PREPARED","PRESERVE","PRIMARY","PRIOR","PRIVILEGES","PROCEDURAL","PROCEDURE","PROCEDURES","PROGRAM","PUBLICATION","QUOTE","RANGE","READ","REAL","REASSIGN","RECHECK","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REINDEX","RELATIVE","RELEASE","RENAME","REPEATABLE","REPLACE","REPLICA","RESET","RESTART","RESTRICT","RETURNING","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUTINE","ROUTINES","ROW","ROWS","RULE","SAVEPOINT","SCHEMA","SCHEMAS","SCROLL","SEARCH","SECURITY","SELECT","SEQUENCE","SEQUENCES","SERIALIZABLE","SERVER","SESSION","SET","SETOF","SETS","SHARE","SHOW","SIMILAR","SIMPLE","SKIP","SMALLINT","SNAPSHOT","SOME","SQL","STABLE","STANDALONE","START","STATEMENT","STATISTICS","STDIN","STDOUT","STORAGE","STORED","STRICT","STRIP","SUBSCRIPTION","SUBSTRING","SUPPORT","SYMMETRIC","SYSID","SYSTEM","TABLE","TABLES","TABLESAMPLE","TABLESPACE","TEMP","TEMPLATE","TEMPORARY","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRANSFORM","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TRUSTED","TYPE","TYPES","UNBOUNDED","UNCOMMITTED","UNENCRYPTED","UNION","UNIQUE","UNKNOWN","UNLISTEN","UNLOGGED","UNTIL","UPDATE","USER","USING","VACUUM","VALID","VALIDATE","VALIDATOR","VALUE","VALUES","VARCHAR","VARIADIC","VARYING","VERBOSE","VERSION","VIEW","VIEWS","VOLATILE","WHEN","WHERE","WHITESPACE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","XML","XMLATTRIBUTES","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","YES","ZONE"];function vt({}){const{query:a,tables:t,setQuery:s,setQueryResult:o,setError:i}=O(),{toast:d}=k(),N=r.useRef(null),T=r.useCallback(E=>{s(E)},[s]),p=async E=>{try{i(null);const u=await ht(E);o(u),d({title:"Executed",description:"Query executed successfully"})}catch(u){i(u instanceof Error?u.message:"Unknown error")}},c=r.useCallback(E=>{var u;if(E.altKey&&E.key==="Enter"){E.preventDefault();const m=(u=N.current)==null?void 0:u.view;if(m){const w=m.state.selection.ranges[0],L=m.state.sliceDoc(w.from,w.to);p(L||a)}}},[a]),l=()=>{const E=document.createElement("a"),u=new Blob([a],{type:"text/plain"});E.href=URL.createObjectURL(u),E.download="query.sql",document.body.appendChild(E),E.click(),document.body.removeChild(E),d({title:"Downloaded",description:"Query downloaded to downloads folder"})};async function x(E){return"clipboard"in navigator?await navigator.clipboard.writeText(E):document.execCommand("copy",!0,E)}const f=async()=>{try{await x(a),d({title:"Copied",description:"Query copied to clipboard"})}catch(E){console.error("Failed to copy text:",E)}},[I,b]=r.useState(()=>document.documentElement.classList.contains("dark")),R=r.useCallback(E=>{const u=E.matchBefore(/\w*/);if(!u||u.from===u.to&&!E.explicit)return null;let m=[];switch(window.sqlViewerConfig.schema){case"mysql":m=Q;break;case"postgres":case"pgsql":m=Lt;break;case"mariadb":m=Ct;break;case"sqlite":case"sqlite3":m=Ot;break;default:m=Q}const w=[...m.map(L=>({label:L,type:"keyword"})),...Object.keys(t).map(L=>({label:L,type:"table"}))];return{from:u.from,to:u.to,options:w}},[t]),A=r.useMemo(()=>[Ta,fa(),pa({override:[R]})],[R]);return r.useEffect(()=>{const E=new MutationObserver(u=>{u.forEach(m=>{m.attributeName==="class"&&b(document.documentElement.classList.contains("dark"))})});return E.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>E.disconnect()},[]),e.jsxs("div",{className:"h-full flex flex-col py-4 bg-background",children:[e.jsxs("div",{className:"flex justify-end space-x-2 mb-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:l,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Download SQL"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:f,children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),e.jsx("div",{className:"flex-1 border rounded-md",children:e.jsx(xa,{value:a,placeholder:"Use ALT+ENTER to execute query",height:"100%",style:{height:"100%"},extensions:A,onChange:T,onKeyDown:c,ref:N,theme:I?Ia:ba,basicSetup:{lineNumbers:!0,allowMultipleSelections:!1,autocompletion:!0}})})]})}const wt=ha,Dt=Ca,yt=r.forwardRef(({className:a,inset:t,children:s,...o},i)=>e.jsxs(Z,{ref:i,className:n("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",a),...o,children:[s,e.jsx(J,{className:"ml-auto"})]}));yt.displayName=Z.displayName;const jt=r.forwardRef(({className:a,...t},s)=>e.jsx(ee,{ref:s,className:n("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t}));jt.displayName=ee.displayName;const Se=r.forwardRef(({className:a,sideOffset:t=4,...s},o)=>e.jsx(Aa,{children:e.jsx(ae,{ref:o,sideOffset:t,className:n("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}));Se.displayName=ae.displayName;const Mt=r.forwardRef(({className:a,inset:t,...s},o)=>e.jsx(te,{ref:o,className:n("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",a),...s}));Mt.displayName=te.displayName;const he=r.forwardRef(({className:a,children:t,checked:s,...o},i)=>e.jsxs(se,{ref:i,className:n("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(re,{children:e.jsx(ga,{className:"h-4 w-4"})})}),t]}));he.displayName=se.displayName;const Ut=r.forwardRef(({className:a,children:t,...s},o)=>e.jsxs(oe,{ref:o,className:n("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(re,{children:e.jsx(Sa,{className:"h-4 w-4 fill-current"})})}),t]}));Ut.displayName=oe.displayName;const Pt=r.forwardRef(({className:a,inset:t,...s},o)=>e.jsx(ne,{ref:o,className:n("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...s}));Pt.displayName=ne.displayName;const _t=r.forwardRef(({className:a,...t},s)=>e.jsx(ie,{ref:s,className:n("-mx-1 my-1 h-px bg-muted",a),...t}));_t.displayName=ie.displayName;const Ce=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:n("w-full caption-bottom text-sm",a),...t})}));Ce.displayName="Table";const Oe=r.forwardRef(({className:a,...t},s)=>e.jsx("thead",{ref:s,className:n("[&_tr]:border-b",a),...t}));Oe.displayName="TableHeader";const Le=r.forwardRef(({className:a,...t},s)=>e.jsx("tbody",{ref:s,className:n("[&_tr:last-child]:border-0",a),...t}));Le.displayName="TableBody";const Gt=r.forwardRef(({className:a,...t},s)=>e.jsx("tfoot",{ref:s,className:n("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t}));Gt.displayName="TableFooter";const j=r.forwardRef(({className:a,...t},s)=>e.jsx("tr",{ref:s,className:n("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t}));j.displayName="TableRow";const ve=r.forwardRef(({className:a,...t},s)=>e.jsx("th",{ref:s,className:n("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t}));ve.displayName="TableHead";const H=r.forwardRef(({className:a,...t},s)=>e.jsx("td",{ref:s,className:n("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t}));H.displayName="TableCell";const Bt=r.forwardRef(({className:a,...t},s)=>e.jsx("caption",{ref:s,className:n("mt-4 text-sm text-muted-foreground",a),...t}));Bt.displayName="TableCaption";const we=Oa,De=La,V=r.forwardRef(({className:a,align:t="center",sideOffset:s=4,...o},i)=>e.jsx(de,{ref:i,align:t,sideOffset:s,className:n("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o}));V.displayName=de.displayName;const Ht=h("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function M({className:a,variant:t,...s}){return e.jsx("div",{className:n(Ht({variant:t}),a),...s})}function Ft({table:a}){return e.jsx("div",{className:"flex items-center justify-end px-2",children:e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," of"," ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(g,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(va,{className:"h-4 w-4"})]}),e.jsxs(g,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(wa,{className:"h-4 w-4"})]}),e.jsxs(g,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(J,{className:"h-4 w-4"})]}),e.jsxs(g,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(Da,{className:"h-4 w-4"})]})]})]})})}function kt({value:a,column:t}){return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs(we,{children:[e.jsx(De,{asChild:!0,children:e.jsx("span",{className:"block max-w-[200px] cursor-pointer hover:underline truncate text-ellipsis",children:a})}),e.jsx(V,{side:"bottom",align:"start",className:"text-balance break-words bg-gray-100 dark:bg-gray-700",children:e.jsxs("div",{className:"flex flex-col justify-center gap-1",children:[e.jsx("span",{className:"max-w-full break-words",children:a}),t&&e.jsx(M,{className:"w-full text-xs font-semibold block text-center",children:t.type_name||"Unknown"})]})})]})})})}const Vt={DATE:/DATE|TIMESTAMP/i,BLOB:/^BLOB$/i,TEXT:/CHAR|TEXT|CLOB|VARCHAR/i,INTEGER:/INT/i,REAL:/REAL|FLOAT|DOUBLE|DECIMAL/i,NUMERIC:/NUMERIC/i,BOOLEAN:/BOOL/i},S=(a,t)=>Vt[t].test(a),Yt=a=>S(a,"DATE"),Wt=a=>S(a,"BLOB"),Xt=a=>S(a,"TEXT"),zt=a=>S(a,"INTEGER"),Kt=a=>S(a,"REAL"),Qt=a=>S(a,"NUMERIC"),$t=a=>S(a,"BOOLEAN"),qt=a=>zt(a)||Kt(a)||Qt(a),Zt=F.memo(({column:a})=>e.jsxs(e.Fragment,{children:[(a==null?void 0:a.isPrimaryKey)&&e.jsx("p",{className:"text-sm font-semibold text-yellow-600",children:"(Primary)"}),(a==null?void 0:a.isForeignKey)&&e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:"(Foreign)"})]})),Jt=F.memo(({column:a})=>{const{type_name:t,isPrimaryKey:s,isForeignKey:o}=a;if(s)return e.jsx(ya,{className:"h-4 w-4 text-yellow-500"});if(o)return e.jsx(ja,{className:"h-4 w-4 text-purple-500"});if(t){if(Wt(t))return e.jsx(Ma,{className:"h-4 w-4 text-green-500"});if(Yt(t))return e.jsx(Ua,{className:"h-4 w-4 text-blue-500"});if(Xt(t))return e.jsx(Pa,{className:"h-4 w-4 text-indigo-500"});if(qt(t))return e.jsx(_a,{className:"h-4 w-4 text-red-500"});if($t(t))return e.jsx(Ga,{className:"h-4 w-4 text-pink-500"})}return e.jsx(Ba,{className:"h-4 w-4 text-gray-500"})});function es({}){var T,p;const{toast:a}=k(),{queryResult:t}=O(),[s,o]=r.useState([]),i=r.useMemo(()=>{var c;return((c=t==null?void 0:t.columns)==null?void 0:c.map(l=>({accessorKey:l,header:({column:x})=>{var I;const f=(I=t==null?void 0:t.structure)==null?void 0:I.find(b=>b.name===l);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center cursor-pointer",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),children:{asc:e.jsx(Ha,{className:"h-4 w-4"}),desc:e.jsx(Fa,{className:"h-4 w-4"})}[x.getIsSorted()]??e.jsx(ka,{className:"h-4 w-4"})}),e.jsxs(we,{children:[e.jsx(De,{asChild:!0,children:e.jsxs("div",{className:"flex cursor-pointer items-center space-x-1",children:[e.jsx("span",{className:"max-w-[200px] overflow-hidden truncate text-ellipsis whitespace-nowrap",children:l}),f&&e.jsx(Jt,{column:f})]})}),e.jsxs(V,{className:"text-balance break-words bg-gray-100 dark:bg-gray-700",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-1",children:[e.jsx("p",{className:"text-sm font-medium",children:l}),e.jsx(Zt,{column:f})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"block w-full self-start text-center text-xs font-semibold",children:(f==null?void 0:f.type_name)||"Unknown"}),(f==null?void 0:f.nullable)&&e.jsx(M,{className:"block w-full self-start text-center text-xs font-semibold",children:"NULLABLE"})]})]})]})]})},cell:({getValue:x})=>{var b;const f=x(),I=(b=t==null?void 0:t.structure)==null?void 0:b.find(R=>R.name===l);return e.jsx(kt,{value:f,column:I})}})))||[]},[t==null?void 0:t.columns]),d=Va({data:(t==null?void 0:t.rows)||[],columns:i,state:{sorting:s},onSortingChange:o,getCoreRowModel:Ya(),getSortedRowModel:Wa(),getPaginationRowModel:Xa()});if(!t||((T=t.columns)==null?void 0:T.length)===0)return null;const N=()=>{const c=d.getAllColumns().filter(A=>A.getIsVisible()).map(A=>A.id),l=c.join(","),x=d.getRowModel().rows.map(A=>c.map(E=>A.getValue(E)).join(",")).join(`
`),f=`${l}
${x}`,I=new Blob([f],{type:"text/csv"}),b=URL.createObjectURL(I),R=document.createElement("a");R.href=b,R.download="query-results.csv",document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(b),a({title:"Downloaded",description:"Query results exported to downloads folder"})};return e.jsxs("div",{className:"h-full py-4 bg-background",children:[e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:N,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(wt,{children:[e.jsx(Dt,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(za,{className:"h-4 w-4 mr-2"}),"Columns",e.jsx(Ka,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Se,{align:"end",children:d.getAllColumns().filter(c=>c.getCanHide()).map(c=>e.jsx(he,{className:"capitalize",checked:c.getIsVisible(),onCheckedChange:l=>c.toggleVisibility(!!l),children:c.id},c.id))})]})]}),e.jsx("div",{className:"mb-[20px] overflow-hidden rounded-lg border border-gray-200 dark:border dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs(Ce,{className:"w-full caption-bottom text-sm",children:[e.jsx(Oe,{children:d.getHeaderGroups().map(c=>e.jsx(j,{children:c.headers.map(l=>e.jsx(ve,{className:n(l.id==="id"?"min-w-[50px]":"min-w-[150px]"),children:e.jsx("div",{className:"flex items-center gap-1",children:l.isPlaceholder?null:X(l.column.columnDef.header,l.getContext())})},l.id))},c.id))}),e.jsx(Le,{children:(p=d.getRowModel().rows)!=null&&p.length?d.getRowModel().rows.map(c=>e.jsx(j,{"data-state":c.getIsSelected()&&"selected",children:c.getVisibleCells().map(l=>e.jsx(H,{className:"max-w-[200px] overflow-hidden text-ellipsis align-middle",children:X(l.column.columnDef.cell,l.getContext())},l.id))},c.id)):e.jsx(j,{children:e.jsx(H,{colSpan:i.length,className:"h-12 text-center",children:"No data found."})})})]})})})}),e.jsx(Ft,{table:d})]})}const ye=r.forwardRef(({className:a,...t},s)=>e.jsx(le,{className:n("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:s,children:e.jsx(Qa,{className:n("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ye.displayName=le.displayName;function as({}){const{theme:a,setTheme:t}=O(),s=()=>{t(a==="light"?"dark":"light"),document.documentElement.classList.toggle("dark")};return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($a,{className:"h-4 w-4"}),e.jsx(ye,{id:"theme-toggle",checked:a==="dark",onCheckedChange:s}),e.jsx(qa,{className:"h-4 w-4"})]})}const ts=Za,je=r.forwardRef(({className:a,...t},s)=>e.jsx(ce,{ref:s,className:n("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...t}));je.displayName=ce.displayName;const ss=h("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Me=r.forwardRef(({className:a,variant:t,...s},o)=>e.jsx(Ee,{ref:o,className:n(ss({variant:t}),a),...s}));Me.displayName=Ee.displayName;const rs=r.forwardRef(({className:a,...t},s)=>e.jsx(ue,{ref:s,className:n("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...t}));rs.displayName=ue.displayName;const Ue=r.forwardRef(({className:a,...t},s)=>e.jsx(me,{ref:s,className:n("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...t,children:e.jsx(Ne,{className:"h-4 w-4"})}));Ue.displayName=me.displayName;const Pe=r.forwardRef(({className:a,...t},s)=>e.jsx(Te,{ref:s,className:n("text-sm font-semibold [&+div]:text-xs",a),...t}));Pe.displayName=Te.displayName;const _e=r.forwardRef(({className:a,...t},s)=>e.jsx(fe,{ref:s,className:n("text-sm opacity-90",a),...t}));_e.displayName=fe.displayName;function os(){const{toasts:a}=k();return e.jsxs(ts,{children:[a.map(function({id:t,title:s,description:o,action:i,...d}){return e.jsxs(Me,{...d,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(Pe,{children:s}),o&&e.jsx(_e,{children:o})]}),i,e.jsx(Ue,{})]},t)}),e.jsx(je,{})]})}const B=768;function ns(){const[a,t]=r.useState(void 0);return r.useEffect(()=>{const s=window.matchMedia(`(max-width: ${B-1}px)`),o=()=>{t(window.innerWidth<B)};return s.addEventListener("change",o),t(window.innerWidth<B),()=>s.removeEventListener("change",o)},[]),!!a}const Ge=r.forwardRef(({className:a,type:t,...s},o)=>e.jsx("input",{type:t,className:n("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:o,...s}));Ge.displayName="Input";const Be=r.forwardRef(({className:a,orientation:t="horizontal",decorative:s=!0,...o},i)=>e.jsx(pe,{ref:i,decorative:s,orientation:t,className:n("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...o}));Be.displayName=pe.displayName;const is=et,ds=at,He=r.forwardRef(({className:a,...t},s)=>e.jsx(Re,{className:n("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s}));He.displayName=Re.displayName;const ls=h("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Fe=r.forwardRef(({side:a="right",className:t,children:s,...o},i)=>e.jsxs(ds,{children:[e.jsx(He,{}),e.jsxs(xe,{ref:i,className:n(ls({side:a}),t),...o,children:[e.jsxs(Ja,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),s]})]}));Fe.displayName=xe.displayName;const cs=r.forwardRef(({className:a,...t},s)=>e.jsx(Ie,{ref:s,className:n("text-lg font-semibold text-foreground",a),...t}));cs.displayName=Ie.displayName;const Es=r.forwardRef(({className:a,...t},s)=>e.jsx(be,{ref:s,className:n("text-sm text-muted-foreground",a),...t}));Es.displayName=be.displayName;function $({className:a,...t}){return e.jsx("div",{className:n("animate-pulse rounded-md bg-primary/10",a),...t})}const us=st,ms=rt,Ns=ot,ke=r.forwardRef(({className:a,sideOffset:t=4,...s},o)=>e.jsx(tt,{children:e.jsx(Ae,{ref:o,sideOffset:t,className:n("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}));ke.displayName=Ae.displayName;const Ts="sidebar:state",fs=60*60*24*7,ps="16rem",Rs="18rem",xs="3rem",Is="b",Ve=r.createContext(null);function U(){const a=r.useContext(Ve);if(!a)throw new Error("useSidebar must be used within a SidebarProvider.");return a}const Ye=r.forwardRef(({defaultOpen:a=!0,open:t,onOpenChange:s,className:o,style:i,children:d,...N},T)=>{const p=ns(),[c,l]=r.useState(!1),[x,f]=r.useState(a),I=t??x,b=r.useCallback(u=>{const m=typeof u=="function"?u(I):u;s?s(m):f(m),document.cookie=`${Ts}=${m}; path=/; max-age=${fs}`},[s,I]),R=r.useCallback(()=>p?l(u=>!u):b(u=>!u),[p,b,l]);r.useEffect(()=>{const u=m=>{m.key===Is&&(m.metaKey||m.ctrlKey)&&(m.preventDefault(),R())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[R]);const A=I?"expanded":"collapsed",E=r.useMemo(()=>({state:A,open:I,setOpen:b,isMobile:p,openMobile:c,setOpenMobile:l,toggleSidebar:R}),[A,I,b,p,c,l,R]);return e.jsx(Ve.Provider,{value:E,children:e.jsx(us,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":ps,"--sidebar-width-icon":xs,...i},className:n("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",o),ref:T,...N,children:d})})})});Ye.displayName="SidebarProvider";const We=r.forwardRef(({side:a="left",variant:t="sidebar",collapsible:s="offcanvas",className:o,children:i,...d},N)=>{const{isMobile:T,state:p,openMobile:c,setOpenMobile:l}=U();return s==="none"?e.jsx("div",{className:n("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",o),ref:N,...d,children:i}):T?e.jsx(is,{open:c,onOpenChange:l,...d,children:e.jsx(Fe,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Rs},side:a,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):e.jsxs("div",{ref:N,className:"group peer hidden md:block text-sidebar-foreground","data-state":p,"data-collapsible":p==="collapsed"?s:"","data-variant":t,"data-side":a,children:[e.jsx("div",{className:n("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:n("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",a==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",o),...d,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});We.displayName="Sidebar";const Xe=r.forwardRef(({className:a,onClick:t,...s},o)=>{const{toggleSidebar:i}=U();return e.jsxs(g,{ref:o,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:n("h-7 w-7",a),onClick:d=>{t==null||t(d),i()},...s,children:[e.jsx(nt,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Xe.displayName="SidebarTrigger";const bs=r.forwardRef(({className:a,...t},s)=>{const{toggleSidebar:o}=U();return e.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:o,title:"Toggle Sidebar",className:n("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",a),...t})});bs.displayName="SidebarRail";const ze=r.forwardRef(({className:a,...t},s)=>e.jsx("main",{ref:s,className:n("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...t}));ze.displayName="SidebarInset";const As=r.forwardRef(({className:a,...t},s)=>e.jsx(Ge,{ref:s,"data-sidebar":"input",className:n("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",a),...t}));As.displayName="SidebarInput";const Ke=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"header",className:n("flex flex-col gap-2 p-2",a),...t}));Ke.displayName="SidebarHeader";const gs=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"footer",className:n("flex flex-col gap-2 p-2",a),...t}));gs.displayName="SidebarFooter";const Ss=r.forwardRef(({className:a,...t},s)=>e.jsx(Be,{ref:s,"data-sidebar":"separator",className:n("mx-2 w-auto bg-sidebar-border",a),...t}));Ss.displayName="SidebarSeparator";const Qe=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"content",className:n("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",a),...t}));Qe.displayName="SidebarContent";const $e=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"group",className:n("relative flex w-full min-w-0 flex-col p-2",a),...t}));$e.displayName="SidebarGroup";const qe=r.forwardRef(({className:a,asChild:t=!1,...s},o)=>{const i=t?C:"div";return e.jsx(i,{ref:o,"data-sidebar":"group-label",className:n("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...s})});qe.displayName="SidebarGroupLabel";const hs=r.forwardRef(({className:a,asChild:t=!1,...s},o)=>{const i=t?C:"button";return e.jsx(i,{ref:o,"data-sidebar":"group-action",className:n("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...s})});hs.displayName="SidebarGroupAction";const Cs=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"group-content",className:n("w-full text-sm",a),...t}));Cs.displayName="SidebarGroupContent";const Y=r.forwardRef(({className:a,...t},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu",className:n("flex w-full min-w-0 flex-col gap-1",a),...t}));Y.displayName="SidebarMenu";const P=r.forwardRef(({className:a,...t},s)=>e.jsx("li",{ref:s,"data-sidebar":"menu-item",className:n("group/menu-item relative",a),...t}));P.displayName="SidebarMenuItem";const Os=h("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),W=r.forwardRef(({asChild:a=!1,isActive:t=!1,variant:s="default",size:o="default",tooltip:i,className:d,...N},T)=>{const p=a?C:"button",{isMobile:c,state:l}=U(),x=e.jsx(p,{ref:T,"data-sidebar":"menu-button","data-size":o,"data-active":t,className:n(Os({variant:s,size:o}),d),...N});return i?(typeof i=="string"&&(i={children:i}),e.jsxs(ms,{children:[e.jsx(Ns,{asChild:!0,children:x}),e.jsx(ke,{side:"right",align:"center",hidden:l!=="collapsed"||c,...i})]})):x});W.displayName="SidebarMenuButton";const Ze=r.forwardRef(({className:a,asChild:t=!1,showOnHover:s=!1,...o},i)=>{const d=t?C:"button";return e.jsx(d,{ref:i,"data-sidebar":"menu-action",className:n("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...o})});Ze.displayName="SidebarMenuAction";const Ls=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:n("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...t}));Ls.displayName="SidebarMenuBadge";const Je=r.forwardRef(({className:a,showIcon:t=!1,...s},o)=>{const i=r.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:o,"data-sidebar":"menu-skeleton",className:n("rounded-md h-8 flex gap-2 px-2 items-center",a),...s,children:[t&&e.jsx($,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx($,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});Je.displayName="SidebarMenuSkeleton";const ea=r.forwardRef(({className:a,...t},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:n("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...t}));ea.displayName="SidebarMenuSub";const aa=r.forwardRef(({...a},t)=>e.jsx("li",{ref:t,...a}));aa.displayName="SidebarMenuSubItem";const ta=r.forwardRef(({asChild:a=!1,size:t="md",isActive:s,className:o,...i},d)=>{const N=a?C:"a";return e.jsx(N,{ref:d,"data-sidebar":"menu-sub-button","data-size":t,"data-active":s,className:n("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",o),...i})});ta.displayName="SidebarMenuSubButton";const vs=it,ws=dt,Ds=lt;function ys(a){try{return ut(a,{useTabs:!1,keywordCase:"upper",tabWidth:2,expressionWidth:100,linesBetweenQueries:1})}catch{return a}}function js(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((a,t)=>e.jsx(P,{children:e.jsx(Je,{showIcon:!0})},t))})}function Ms({}){const{tables:a,queryLimit:t,setQuery:s}=O(),o=i=>{const N=`SELECT ${a[i].map(p=>p.name).join(",")} FROM ${i} LIMIT ${t}`,T=ys(N);s(T)};return e.jsxs($e,{children:[e.jsxs(qe,{children:["Tables (",Object.keys(a).length||0,")"]}),e.jsxs(Y,{children:[!a&&e.jsx(js,{}),a&&Object.keys(a).map(i=>{var d,N;return e.jsx(vs,{asChild:!0,children:e.jsxs(P,{children:[e.jsx(W,{asChild:!0,tooltip:i,children:e.jsxs("a",{href:"#",onClick:()=>o(i),children:[e.jsx(ct,{}),e.jsx("span",{children:i})]})}),(d=a[i])!=null&&d.length?e.jsxs(e.Fragment,{children:[e.jsx(ws,{asChild:!0,children:e.jsxs(Ze,{className:"data-[state=open]:rotate-90",children:[e.jsx(Et,{}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})}),e.jsx(Ds,{children:e.jsx(ea,{className:"pr-0 mr-0",children:(N=a[i])==null?void 0:N.map(T=>e.jsx(aa,{children:e.jsx(ta,{asChild:!0,children:e.jsxs("div",{className:"flex justify-between",children:[T.name," ",T.type_name&&e.jsx(M,{variant:"secondary",children:T.type_name})]})})},T.name))})})]}):null]})},i)})]})]})}function Us({...a}){const{setTables:t}=O();return r.useEffect(()=>{(async()=>{try{const o=await St();t(o)}catch(o){console.error("Ошибка при загрузке таблиц:",o)}})()},[]),e.jsxs(We,{variant:"inset",...a,children:[e.jsx(Ke,{children:e.jsx(Y,{children:e.jsx(P,{children:e.jsx(W,{size:"lg",asChild:!0,children:e.jsxs("a",{href:"#",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:e.jsx(mt,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"SQL Viewer"}),e.jsx("span",{className:"truncate text-xs",children:"for Laravel"})]})]})})})})}),e.jsx(Qe,{children:e.jsx(Ms,{})})]})}const Ps=h("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sa=r.forwardRef(({className:a,variant:t,...s},o)=>e.jsx("div",{ref:o,role:"alert",className:n(Ps({variant:t}),a),...s}));sa.displayName="Alert";const ra=r.forwardRef(({className:a,...t},s)=>e.jsx("h5",{ref:s,className:n("mb-1 font-medium leading-none tracking-tight",a),...t}));ra.displayName="AlertTitle";const oa=r.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:n("text-sm [&_p]:leading-relaxed",a),...t}));oa.displayName="AlertDescription";function _s(){const{error:a,theme:t}=O();return r.useEffect(()=>{t==="dark"&&document.documentElement.classList.add("dark")},[]),e.jsxs(Ye,{children:[e.jsx(Us,{}),e.jsxs(ze,{children:[e.jsxs("header",{className:"flex h-16 shrink-0 items-center gap-2",children:[e.jsx("div",{className:"flex flex-1 items-center gap-2 px-4",children:e.jsx(Xe,{className:"-ml-1"})}),e.jsx("div",{className:"ml-auto px-3",children:e.jsx(as,{})})]}),e.jsx("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:e.jsxs(ft,{direction:"vertical",children:[e.jsx(z,{className:"p-0",defaultSize:40,minSize:20,children:e.jsx(vt,{})}),e.jsx("div",{children:e.jsx(pt,{withHandle:!0})}),e.jsx(z,{defaultSize:60,minSize:20,children:a?e.jsx("div",{className:"p-4",children:e.jsxs(sa,{variant:"destructive",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx(ra,{children:"Error"}),e.jsx(oa,{children:a})]})}):e.jsx(es,{})})]})}),e.jsx(os,{})]})]})}Tt.createRoot(document.getElementById("root")).render(e.jsx(F.StrictMode,{children:e.jsx(_s,{})}));
