import{_ as J,a as G}from"./@babel-BjXSgPXB.js";import{r as f,j as P}from"./react-CUxW9ASL.js";import{c as Q,d as X,s as Y,h as Z,f as $,a as ee,l as te,b as ae,e as re,g as ie,i as oe,j as ne,k as se,m as le,E as T,n as ce,o as w,p as fe,q as ue,r as ge,t as he,u as de,v as me,w as pe,x as be,y as ye,z as U,A as d,B as Se,C as ke,D as ve,S as xe,F as Ce,H as Ne}from"./@codemirror-B5QMOryK.js";import{a as e}from"./@lezer-BlnJF4_N.js";var j=function(t){t===void 0&&(t={});var{crosshairCursor:a=!1}=t,i=[];t.closeBracketsKeymap!==!1&&(i=i.concat(Q)),t.defaultKeymap!==!1&&(i=i.concat(X)),t.searchKeymap!==!1&&(i=i.concat(Y)),t.historyKeymap!==!1&&(i=i.concat(Z)),t.foldKeymap!==!1&&(i=i.concat($)),t.completionKeymap!==!1&&(i=i.concat(ee)),t.lintKeymap!==!1&&(i=i.concat(te));var r=[];return t.lineNumbers!==!1&&r.push(ae()),t.highlightActiveLineGutter!==!1&&r.push(re()),t.highlightSpecialChars!==!1&&r.push(ie()),t.history!==!1&&r.push(oe()),t.foldGutter!==!1&&r.push(ne()),t.drawSelection!==!1&&r.push(se()),t.dropCursor!==!1&&r.push(le()),t.allowMultipleSelections!==!1&&r.push(T.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&r.push(ce()),t.syntaxHighlighting!==!1&&r.push(w(fe,{fallback:!0})),t.bracketMatching!==!1&&r.push(ue()),t.closeBrackets!==!1&&r.push(ge()),t.autocompletion!==!1&&r.push(he()),t.rectangularSelection!==!1&&r.push(de()),a!==!1&&r.push(me()),t.highlightActiveLine!==!1&&r.push(pe()),t.highlightSelectionMatches!==!1&&r.push(be()),t.tabSize&&typeof t.tabSize=="number"&&r.push(ye.of(" ".repeat(t.tabSize))),r.concat([U.of(i.flat())]).filter(Boolean)},Ee=d.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Be=function(t){t===void 0&&(t={});var{indentWithTab:a=!0,editable:i=!0,readOnly:r=!1,theme:l="light",placeholder:c="",basicSetup:g=!0}=t,s=[];switch(a&&s.unshift(U.of([Se])),g&&(typeof g=="boolean"?s.unshift(j()):s.unshift(j(g))),c&&s.unshift(ke(c)),l){case"light":s.push(Ee);break;case"dark":s.push(ve);break;case"none":break;default:s.push(l);break}return i===!1&&s.push(d.editable.of(!1)),r&&s.push(T.readOnly.of(!0)),[...s]},Fe=o=>({line:o.state.doc.lineAt(o.state.selection.main.from),lineCount:o.state.doc.lines,lineBreak:o.state.lineBreak,length:o.state.doc.length,readOnly:o.state.readOnly,tabSize:o.state.tabSize,selection:o.state.selection,selectionAsSingle:o.state.selection.asSingle().main,ranges:o.state.selection.ranges,selectionCode:o.state.sliceDoc(o.state.selection.main.from,o.state.selection.main.to),selections:o.state.selection.ranges.map(t=>o.state.sliceDoc(t.from,t.to)),selectedText:o.state.selection.ranges.some(t=>!t.empty)}),R=Ce.define(),Le=[];function We(o){var{value:t,selection:a,onChange:i,onStatistics:r,onCreateEditor:l,onUpdate:c,extensions:g=Le,autoFocus:s,theme:m="light",height:C=null,minHeight:p=null,maxHeight:N=null,width:E=null,minWidth:B=null,maxWidth:F=null,placeholder:L="",editable:W=!0,readOnly:D=!1,indentWithTab:H=!0,basicSetup:O=!0,root:A,initialState:k}=o,[b,K]=f.useState(),[n,h]=f.useState(),[y,S]=f.useState(),I=d.theme({"&":{height:C,minHeight:p,maxHeight:N,width:E,minWidth:B,maxWidth:F},"& .cm-scroller":{height:"100% !important"}}),z=d.updateListener.of(u=>{if(u.docChanged&&typeof i=="function"&&!u.transactions.some(V=>V.annotation(R))){var x=u.state.doc,M=x.toString();i(M,u)}r&&r(Fe(u))}),q=Be({theme:m,editable:W,readOnly:D,placeholder:L,indentWithTab:H,basicSetup:O}),v=[z,I,...q];return c&&typeof c=="function"&&v.push(d.updateListener.of(c)),v=v.concat(g),f.useEffect(()=>{if(b&&!y){var u={doc:t,selection:a,extensions:v},x=k?T.fromJSON(k.json,u,k.fields):T.create(u);if(S(x),!n){var M=new d({state:x,parent:b,root:A});h(M),l&&l(M,x)}}return()=>{n&&(S(void 0),h(void 0))}},[b,y]),f.useEffect(()=>K(o.container),[o.container]),f.useEffect(()=>()=>{n&&(n.destroy(),h(void 0))},[n]),f.useEffect(()=>{s&&n&&n.focus()},[s,n]),f.useEffect(()=>{n&&n.dispatch({effects:xe.reconfigure.of(v)})},[m,g,C,p,N,E,B,F,L,W,D,H,O,i,c]),f.useEffect(()=>{if(t!==void 0){var u=n?n.state.doc.toString():"";n&&t!==u&&n.dispatch({changes:{from:0,to:u.length,insert:t||""},annotations:[R.of(!0)]})}},[t,n]),{state:y,setState:S,view:n,setView:h,container:b,setContainer:K}}var De=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],He=f.forwardRef((o,t)=>{var{className:a,value:i="",selection:r,extensions:l=[],onChange:c,onStatistics:g,onCreateEditor:s,onUpdate:m,autoFocus:C,theme:p="light",height:N,minHeight:E,maxHeight:B,width:F,minWidth:L,maxWidth:W,basicSetup:D,placeholder:H,indentWithTab:O,editable:A,readOnly:k,root:b,initialState:K}=o,n=J(o,De),h=f.useRef(null),{state:y,view:S,container:I}=We({container:h.current,root:b,value:i,autoFocus:C,theme:p,height:N,minHeight:E,maxHeight:B,width:F,minWidth:L,maxWidth:W,basicSetup:D,placeholder:H,indentWithTab:O,editable:A,readOnly:k,selection:r,onChange:c,onStatistics:g,onCreateEditor:s,onUpdate:m,extensions:l,initialState:K});if(f.useImperativeHandle(t,()=>({editor:h.current,state:y,view:S}),[h,I,y,S]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var z=typeof p=="string"?"cm-theme-"+p:"cm-theme";return P.jsx("div",G({ref:h,className:""+z+(a?" "+a:"")},n))});He.displayName="CodeMirror";var _=o=>{var{theme:t,settings:a={},styles:i=[]}=o,r={".cm-gutters":{}},l={};a.background&&(l.backgroundColor=a.background),a.backgroundImage&&(l.backgroundImage=a.backgroundImage),a.foreground&&(l.color=a.foreground),a.fontSize&&(l.fontSize=a.fontSize),(a.background||a.foreground)&&(r["&"]=l),a.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(r[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(r[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(r[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(r[".cm-content"]={caretColor:a.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var c={};a.gutterActiveForeground&&(c.color=a.gutterActiveForeground),a.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:a.lineHighlight},c.backgroundColor=a.lineHighlight),r[".cm-activeLineGutter"]=c,a.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var g=d.theme(r,{dark:t==="dark"}),s=Ne.define(i),m=[g,w(s)];return m},Oe={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},Ke=[{tag:[e.standard(e.tagName),e.tagName],color:"#116329"},{tag:[e.comment,e.bracket],color:"#6a737d"},{tag:[e.className,e.propertyName],color:"#6f42c1"},{tag:[e.variableName,e.attributeName,e.number,e.operator],color:"#005cc5"},{tag:[e.keyword,e.typeName,e.typeOperator,e.typeName],color:"#d73a49"},{tag:[e.string,e.meta,e.regexp],color:"#032f62"},{tag:[e.name,e.quote],color:"#22863a"},{tag:[e.heading,e.strong],color:"#24292e",fontWeight:"bold"},{tag:[e.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[e.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[e.atom,e.bool,e.special(e.variableName)],color:"#e36209"},{tag:[e.url,e.escape,e.regexp,e.link],color:"#032f62"},{tag:e.link,textDecoration:"underline"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.invalid,color:"#cb2431"}],Me=o=>{var{theme:t="light",settings:a={},styles:i=[]}={};return _({theme:t,settings:G({},Oe,a),styles:[...Ke,...i]})},we=Me(),Te={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},Ae=[{tag:[e.standard(e.tagName),e.tagName],color:"#7ee787"},{tag:[e.comment,e.bracket],color:"#8b949e"},{tag:[e.className,e.propertyName],color:"#d2a8ff"},{tag:[e.variableName,e.attributeName,e.number,e.operator],color:"#79c0ff"},{tag:[e.keyword,e.typeName,e.typeOperator,e.typeName],color:"#ff7b72"},{tag:[e.string,e.meta,e.regexp],color:"#a5d6ff"},{tag:[e.name,e.quote],color:"#7ee787"},{tag:[e.heading,e.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[e.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[e.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[e.atom,e.bool,e.special(e.variableName)],color:"#ffab70"},{tag:e.link,textDecoration:"underline"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.invalid,color:"#f97583"}],Ie=o=>{var{theme:t="dark",settings:a={},styles:i=[]}={};return _({theme:t,settings:G({},Te,a),styles:[...Ae,...i]})},Ue=Ie();export{He as R,we as a,Ue as g};
