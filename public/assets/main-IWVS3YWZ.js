import{j as e,r,R as P}from"./react-CUxW9ASL.js";import{c as at}from"./react-dom-BTj_5bdj.js";import{D as st,S as R,a as G,C as q,b as W,P as rt,c as X,I as J,d as Y,e as Z,f as ot,R as ee,g as nt,L as te,h as ae,i as it,T as dt,j as se,k as lt,l as ct,m as ut,n as mt,o as ft,p as re,q as pt,V as oe,r as ne,A as ie,s as de,t as le,u as ce,v as ue,w as xt,x as me,O as fe,y as pe,z as bt,B as xe,E as be,F as gt,G as ht,H as vt,J as ge,K as wt,M as jt,N as yt,Q as Nt,U as St,W as Rt}from"./@radix-ui-Br9uVhVe.js";import{P as Tt,a as Ct,b as kt}from"./react-resizable-panels-BS6LXeQx.js";import{c as Et}from"./clsx-B-dksMZM.js";import{t as Mt}from"./tailwind-merge-Dnoi3Axr.js";import{R as It,g as Dt,a as At}from"./@uiw-Cb38G46x.js";import{M as _t,G as zt,P as Lt,I as Ot,J as Pt}from"./@codemirror-B5QMOryK.js";import{c as T}from"./class-variance-authority-Bb4qSo10.js";import{D as he,C as Bt,K as $t,a as Vt,b as Ht,c as Qt,T as Ft,H as Ut,d as Kt,e as Gt,A as qt,f as Wt,g as Xt,S as Jt,h as Yt,i as Zt,M as ea,P as ta,j as aa,k as sa,l as ra,m as oa}from"./lucide-react-s2UIoGPE.js";import{u as na,g as ia,a as da,b as la,f as Q}from"./@tanstack-BJDKYJkY.js";import{f as ca}from"./sql-formatter-CbssVgxQ.js";import"./nearley-C98kr7Tu.js";import"./scheduler-CzFDRTuY.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-ClpkPDrz.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-hLEP0MmZ.js";import"./react-style-singleton-DgrL5e6h.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-DWYkgawt.js";import"./use-callback-ref-DKr-hq5E.js";import"./@floating-ui-32-948iJ.js";import"./@babel-BjXSgPXB.js";import"./@lezer-BlnJF4_N.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";function n(...t){return Mt(Et(t))}const ua=({className:t,...a})=>e.jsx(Tt,{className:n("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a}),F=Ct,ma=({withHandle:t,className:a,...s})=>e.jsx(kt,{className:n("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...s,children:t&&e.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:e.jsx(st,{className:"h-2.5 w-2.5"})})}),fa=T("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),j=r.forwardRef(({className:t,variant:a,size:s,asChild:o=!1,...i},d)=>{const f=o?R:"button";return e.jsx(f,{className:n(fa({variant:a,size:s,className:t})),ref:d,...i})});j.displayName="Button";const pa=1,xa=1e6;let _=0;function ba(){return _=(_+1)%Number.MAX_SAFE_INTEGER,_.toString()}const z=new Map,U=t=>{if(z.has(t))return;const a=setTimeout(()=>{z.delete(t),C({type:"REMOVE_TOAST",toastId:t})},xa);z.set(t,a)},ga=(t,a)=>{switch(a.type){case"ADD_TOAST":return{...t,toasts:[a.toast,...t.toasts].slice(0,pa)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===a.toast.id?{...s,...a.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=a;return s?U(s):t.toasts.forEach(o=>{U(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==a.toastId)}}},k=[];let E={toasts:[]};function C(t){E=ga(E,t),k.forEach(a=>{a(E)})}function ha({...t}){const a=ba(),s=i=>C({type:"UPDATE_TOAST",toast:{...i,id:a}}),o=()=>C({type:"DISMISS_TOAST",toastId:a});return C({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:i=>{i||o()}}}),{id:a,dismiss:o,update:s}}function B(){const[t,a]=r.useState(E);return r.useEffect(()=>(k.push(a),()=>{const s=k.indexOf(a);s>-1&&k.splice(s,1)}),[t]),{...t,toast:ha,dismiss:s=>C({type:"DISMISS_TOAST",toastId:s})}}const ve=window.sqlViewerConfig.path,va=async()=>{const t=await fetch(`${ve}/tables`);if(!t.ok)throw new Error("Ошибка при загрузке таблиц");return(await t.json()).tables},wa=async t=>{var o;const a=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"),s=await fetch(`${ve}/execute`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a||""},body:JSON.stringify({query:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Ошибка выполнения запроса")}return await s.json()};function ja({query:t,onQueryChange:a,onQueryResult:s,onError:o}){const{toast:i}=B(),d=r.useRef(null),f=r.useCallback(c=>{a(c)},[a]),b=async c=>{try{const p=await wa(c);s(p),i({title:"Executed",description:"Query executed successfully"})}catch(p){o(p instanceof Error?p.message:"Unknown error")}},x=r.useCallback(c=>{var p;if(c.altKey&&c.key==="Enter"){c.preventDefault();const v=(p=d.current)==null?void 0:p.view;if(v){const S=v.state.selection.ranges[0],w=v.state.sliceDoc(S.from,S.to);b(w||t)}}},[t]),u=()=>{const c=document.createElement("a"),p=new Blob([t],{type:"text/plain"});c.href=URL.createObjectURL(p),c.download="query.sql",document.body.appendChild(c),c.click(),document.body.removeChild(c),i({title:"Downloaded",description:"Query downloaded to downloads folder"})};async function l(c){return"clipboard"in navigator?await navigator.clipboard.writeText(c):document.execCommand("copy",!0,c)}const g=async()=>{try{await l(t),i({title:"Copied",description:"Query copied to clipboard"})}catch(c){console.error("Failed to copy text:",c)}},[m,h]=r.useState(()=>document.documentElement.classList.contains("dark"));return r.useEffect(()=>{const c=new MutationObserver(p=>{p.forEach(v=>{v.attributeName==="class"&&h(document.documentElement.classList.contains("dark"))})});return c.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>c.disconnect()},[]),e.jsxs("div",{className:"h-full flex flex-col py-4 bg-background",children:[e.jsxs("div",{className:"flex justify-end space-x-2 mb-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:u,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Download SQL"]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:g,children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),e.jsx("div",{className:"flex-1 border rounded-md",children:e.jsx(It,{value:t,placeholder:"Use ALT+ENTER to execute query",height:"100%",style:{height:"100%"},extensions:[_t,zt,Lt,Ot,Pt()],onChange:f,onKeyDown:x,ref:d,theme:m?Dt:At,basicSetup:{lineNumbers:!0,allowMultipleSelections:!1}})})]})}const ya=it,Na=dt,Sa=r.forwardRef(({className:t,inset:a,children:s,...o},i)=>e.jsxs(G,{ref:i,className:n("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...o,children:[s,e.jsx(q,{className:"ml-auto"})]}));Sa.displayName=G.displayName;const Ra=r.forwardRef(({className:t,...a},s)=>e.jsx(W,{ref:s,className:n("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a}));Ra.displayName=W.displayName;const we=r.forwardRef(({className:t,sideOffset:a=4,...s},o)=>e.jsx(rt,{children:e.jsx(X,{ref:o,sideOffset:a,className:n("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));we.displayName=X.displayName;const Ta=r.forwardRef(({className:t,inset:a,...s},o)=>e.jsx(J,{ref:o,className:n("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",a&&"pl-8",t),...s}));Ta.displayName=J.displayName;const je=r.forwardRef(({className:t,children:a,checked:s,...o},i)=>e.jsxs(Y,{ref:i,className:n("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Z,{children:e.jsx(ot,{className:"h-4 w-4"})})}),a]}));je.displayName=Y.displayName;const Ca=r.forwardRef(({className:t,children:a,...s},o)=>e.jsxs(ee,{ref:o,className:n("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Z,{children:e.jsx(nt,{className:"h-4 w-4 fill-current"})})}),a]}));Ca.displayName=ee.displayName;const ka=r.forwardRef(({className:t,inset:a,...s},o)=>e.jsx(te,{ref:o,className:n("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...s}));ka.displayName=te.displayName;const Ea=r.forwardRef(({className:t,...a},s)=>e.jsx(ae,{ref:s,className:n("-mx-1 my-1 h-px bg-muted",t),...a}));Ea.displayName=ae.displayName;const ye=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:n("w-full caption-bottom text-sm",t),...a})}));ye.displayName="Table";const Ne=r.forwardRef(({className:t,...a},s)=>e.jsx("thead",{ref:s,className:n("[&_tr]:border-b",t),...a}));Ne.displayName="TableHeader";const Se=r.forwardRef(({className:t,...a},s)=>e.jsx("tbody",{ref:s,className:n("[&_tr:last-child]:border-0",t),...a}));Se.displayName="TableBody";const Ma=r.forwardRef(({className:t,...a},s)=>e.jsx("tfoot",{ref:s,className:n("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a}));Ma.displayName="TableFooter";const M=r.forwardRef(({className:t,...a},s)=>e.jsx("tr",{ref:s,className:n("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a}));M.displayName="TableRow";const Re=r.forwardRef(({className:t,...a},s)=>e.jsx("th",{ref:s,className:n("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a}));Re.displayName="TableHead";const O=r.forwardRef(({className:t,...a},s)=>e.jsx("td",{ref:s,className:n("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a}));O.displayName="TableCell";const Ia=r.forwardRef(({className:t,...a},s)=>e.jsx("caption",{ref:s,className:n("mt-4 text-sm text-muted-foreground",t),...a}));Ia.displayName="TableCaption";const Te=lt,Ce=ct,$=r.forwardRef(({className:t,align:a="center",sideOffset:s=4,...o},i)=>e.jsx(se,{ref:i,align:a,sideOffset:s,className:n("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o}));$.displayName=se.displayName;const Da=T("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function I({className:t,variant:a,...s}){return e.jsx("div",{className:n(Da({variant:a}),t),...s})}function Aa({table:t}){return e.jsx("div",{className:"flex items-center justify-end px-2",children:e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(j,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(ut,{className:"h-4 w-4"})]}),e.jsxs(j,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(mt,{className:"h-4 w-4"})]}),e.jsxs(j,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(q,{className:"h-4 w-4"})]}),e.jsxs(j,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ft,{className:"h-4 w-4"})]})]})]})})}function _a({value:t,column:a}){return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs(Te,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx("span",{className:"block max-w-[200px] cursor-pointer hover:underline truncate text-ellipsis",children:t})}),e.jsx($,{side:"bottom",align:"start",className:"text-balance break-words bg-gray-100 dark:bg-gray-700",children:e.jsxs("div",{className:"flex flex-col justify-center gap-1",children:[e.jsx("span",{className:"max-w-full break-words",children:t}),a&&e.jsx(I,{className:"w-full text-xs font-semibold block text-center",children:a.type_name||"Unknown"})]})})]})})})}const za={DATE:/DATE|TIMESTAMP/i,BLOB:/^BLOB$/i,TEXT:/CHAR|TEXT|CLOB|VARCHAR/i,INTEGER:/INT/i,REAL:/REAL|FLOAT|DOUBLE|DECIMAL/i,NUMERIC:/NUMERIC/i,BOOLEAN:/BOOL/i},N=(t,a)=>za[a].test(t),La=t=>N(t,"DATE"),Oa=t=>N(t,"BLOB"),Pa=t=>N(t,"TEXT"),Ba=t=>N(t,"INTEGER"),$a=t=>N(t,"REAL"),Va=t=>N(t,"NUMERIC"),Ha=t=>N(t,"BOOLEAN"),Qa=t=>Ba(t)||$a(t)||Va(t),Fa=P.memo(({column:t})=>e.jsxs(e.Fragment,{children:[(t==null?void 0:t.isPrimaryKey)&&e.jsx("p",{className:"text-sm font-semibold text-yellow-600",children:"(Primary)"}),(t==null?void 0:t.isForeignKey)&&e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:"(Foreign)"})]})),Ua=P.memo(({column:t})=>{const{type_name:a,isPrimaryKey:s,isForeignKey:o}=t;if(s)return e.jsx($t,{className:"h-4 w-4 text-yellow-500"});if(o)return e.jsx(Vt,{className:"h-4 w-4 text-purple-500"});if(a){if(Oa(a))return e.jsx(Ht,{className:"h-4 w-4 text-green-500"});if(La(a))return e.jsx(Qt,{className:"h-4 w-4 text-blue-500"});if(Pa(a))return e.jsx(Ft,{className:"h-4 w-4 text-indigo-500"});if(Qa(a))return e.jsx(Ut,{className:"h-4 w-4 text-red-500"});if(Ha(a))return e.jsx(Kt,{className:"h-4 w-4 text-pink-500"})}return e.jsx(Gt,{className:"h-4 w-4 text-gray-500"})});function Ka({results:t}){var b,x;const{toast:a}=B(),[s,o]=r.useState([]),i=r.useMemo(()=>{var u;return((u=t==null?void 0:t.columns)==null?void 0:u.map(l=>({accessorKey:l,header:({column:g})=>{var h;const m=(h=t==null?void 0:t.structure)==null?void 0:h.find(c=>c.name===l);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center cursor-pointer",onClick:()=>g.toggleSorting(g.getIsSorted()==="asc"),children:{asc:e.jsx(qt,{className:"h-4 w-4"}),desc:e.jsx(Wt,{className:"h-4 w-4"})}[g.getIsSorted()]??e.jsx(Xt,{className:"h-4 w-4"})}),e.jsxs(Te,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs("div",{className:"flex cursor-pointer items-center space-x-1",children:[e.jsx("span",{className:"max-w-[200px] overflow-hidden truncate text-ellipsis whitespace-nowrap",children:l}),m&&e.jsx(Ua,{column:m})]})}),e.jsxs($,{className:"text-balance break-words bg-gray-100 dark:bg-gray-700",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-1",children:[e.jsx("p",{className:"text-sm font-medium",children:l}),e.jsx(Fa,{column:m})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"block w-full self-start text-center text-xs font-semibold",children:(m==null?void 0:m.type_name)||"Unknown"}),(m==null?void 0:m.nullable)&&e.jsx(I,{className:"block w-full self-start text-center text-xs font-semibold",children:"NULLABLE"})]})]})]})]})},cell:({getValue:g})=>{var c;const m=g(),h=(c=t==null?void 0:t.structure)==null?void 0:c.find(p=>p.name===l);return e.jsx(_a,{value:m,column:h})}})))||[]},[t==null?void 0:t.columns]),d=na({data:(t==null?void 0:t.rows)||[],columns:i,state:{sorting:s},onSortingChange:o,getCoreRowModel:ia(),getSortedRowModel:da(),getPaginationRowModel:la()});if(!t||((b=t.rows)==null?void 0:b.length)===0)return null;const f=()=>{const u=d.getAllColumns().filter(v=>v.getIsVisible()).map(v=>v.id),l=u.join(","),g=d.getRowModel().rows.map(v=>u.map(S=>v.getValue(S)).join(",")).join(`
`),m=`${l}
${g}`,h=new Blob([m],{type:"text/csv"}),c=URL.createObjectURL(h),p=document.createElement("a");p.href=c,p.download="query-results.csv",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(c),a({title:"Downloaded",description:"Query results exported to downloads folder"})};return e.jsxs("div",{className:"h-full py-4 bg-background",children:[e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:f,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(ya,{children:[e.jsx(Na,{asChild:!0,children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Columns",e.jsx(Yt,{className:"ml-2 h-4 w-4"})]})}),e.jsx(we,{align:"end",children:d.getAllColumns().filter(u=>u.getCanHide()).map(u=>e.jsx(je,{className:"capitalize",checked:u.getIsVisible(),onCheckedChange:l=>u.toggleVisibility(!!l),children:u.id},u.id))})]})]}),e.jsx("div",{className:"mb-[20px] overflow-hidden rounded-lg border border-gray-200 dark:border dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs(ye,{className:"w-full caption-bottom text-sm",children:[e.jsx(Ne,{children:d.getHeaderGroups().map(u=>e.jsx(M,{children:u.headers.map(l=>e.jsx(Re,{className:n(l.id==="id"?"min-w-[50px]":"min-w-[150px]"),children:e.jsx("div",{className:"flex items-center gap-1",children:l.isPlaceholder?null:Q(l.column.columnDef.header,l.getContext())})},l.id))},u.id))}),e.jsx(Se,{children:(x=d.getRowModel().rows)!=null&&x.length?d.getRowModel().rows.map(u=>e.jsx(M,{"data-state":u.getIsSelected()&&"selected",children:u.getVisibleCells().map(l=>e.jsx(O,{className:"max-w-[200px] overflow-hidden text-ellipsis align-middle",children:Q(l.column.columnDef.cell,l.getContext())},l.id))},u.id)):e.jsx(M,{children:e.jsx(O,{colSpan:i.length,className:"h-24 text-center",children:"No results."})})})]})})})}),e.jsx(Aa,{table:d})]})}const ke=r.forwardRef(({className:t,...a},s)=>e.jsx(re,{className:n("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:s,children:e.jsx(pt,{className:n("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ke.displayName=re.displayName;function Ga({theme:t,onToggle:a}){return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx(ke,{id:"theme-toggle",checked:t==="dark",onCheckedChange:a}),e.jsx(ea,{className:"h-4 w-4"})]})}const qa=xt,Ee=r.forwardRef(({className:t,...a},s)=>e.jsx(oe,{ref:s,className:n("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...a}));Ee.displayName=oe.displayName;const Wa=T("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Me=r.forwardRef(({className:t,variant:a,...s},o)=>e.jsx(ne,{ref:o,className:n(Wa({variant:a}),t),...s}));Me.displayName=ne.displayName;const Xa=r.forwardRef(({className:t,...a},s)=>e.jsx(ie,{ref:s,className:n("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...a}));Xa.displayName=ie.displayName;const Ie=r.forwardRef(({className:t,...a},s)=>e.jsx(de,{ref:s,className:n("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...a,children:e.jsx(le,{className:"h-4 w-4"})}));Ie.displayName=de.displayName;const De=r.forwardRef(({className:t,...a},s)=>e.jsx(ce,{ref:s,className:n("text-sm font-semibold [&+div]:text-xs",t),...a}));De.displayName=ce.displayName;const Ae=r.forwardRef(({className:t,...a},s)=>e.jsx(ue,{ref:s,className:n("text-sm opacity-90",t),...a}));Ae.displayName=ue.displayName;function Ja(){const{toasts:t}=B();return e.jsxs(qa,{children:[t.map(function({id:a,title:s,description:o,action:i,...d}){return e.jsxs(Me,{...d,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(De,{children:s}),o&&e.jsx(Ae,{children:o})]}),i,e.jsx(Ie,{})]},a)}),e.jsx(Ee,{})]})}const L=768;function Ya(){const[t,a]=r.useState(void 0);return r.useEffect(()=>{const s=window.matchMedia(`(max-width: ${L-1}px)`),o=()=>{a(window.innerWidth<L)};return s.addEventListener("change",o),a(window.innerWidth<L),()=>s.removeEventListener("change",o)},[]),!!t}const _e=r.forwardRef(({className:t,type:a,...s},o)=>e.jsx("input",{type:a,className:n("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:o,...s}));_e.displayName="Input";const ze=r.forwardRef(({className:t,orientation:a="horizontal",decorative:s=!0,...o},i)=>e.jsx(me,{ref:i,decorative:s,orientation:a,className:n("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...o}));ze.displayName=me.displayName;const Za=gt,es=ht,Le=r.forwardRef(({className:t,...a},s)=>e.jsx(fe,{className:n("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s}));Le.displayName=fe.displayName;const ts=T("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Oe=r.forwardRef(({side:t="right",className:a,children:s,...o},i)=>e.jsxs(es,{children:[e.jsx(Le,{}),e.jsxs(pe,{ref:i,className:n(ts({side:t}),a),...o,children:[e.jsxs(bt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),s]})]}));Oe.displayName=pe.displayName;const as=r.forwardRef(({className:t,...a},s)=>e.jsx(xe,{ref:s,className:n("text-lg font-semibold text-foreground",t),...a}));as.displayName=xe.displayName;const ss=r.forwardRef(({className:t,...a},s)=>e.jsx(be,{ref:s,className:n("text-sm text-muted-foreground",t),...a}));ss.displayName=be.displayName;function K({className:t,...a}){return e.jsx("div",{className:n("animate-pulse rounded-md bg-primary/10",t),...a})}const rs=wt,os=jt,ns=yt,Pe=r.forwardRef(({className:t,sideOffset:a=4,...s},o)=>e.jsx(vt,{children:e.jsx(ge,{ref:o,sideOffset:a,className:n("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Pe.displayName=ge.displayName;const is="sidebar:state",ds=60*60*24*7,ls="16rem",cs="18rem",us="3rem",ms="b",Be=r.createContext(null);function D(){const t=r.useContext(Be);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const $e=r.forwardRef(({defaultOpen:t=!0,open:a,onOpenChange:s,className:o,style:i,children:d,...f},b)=>{const x=Ya(),[u,l]=r.useState(!1),[g,m]=r.useState(t),h=a??g,c=r.useCallback(w=>{const y=typeof w=="function"?w(h):w;s?s(y):m(y),document.cookie=`${is}=${y}; path=/; max-age=${ds}`},[s,h]),p=r.useCallback(()=>x?l(w=>!w):c(w=>!w),[x,c,l]);r.useEffect(()=>{const w=y=>{y.key===ms&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),p())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[p]);const v=h?"expanded":"collapsed",S=r.useMemo(()=>({state:v,open:h,setOpen:c,isMobile:x,openMobile:u,setOpenMobile:l,toggleSidebar:p}),[v,h,c,x,u,l,p]);return e.jsx(Be.Provider,{value:S,children:e.jsx(rs,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":ls,"--sidebar-width-icon":us,...i},className:n("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",o),ref:b,...f,children:d})})})});$e.displayName="SidebarProvider";const Ve=r.forwardRef(({side:t="left",variant:a="sidebar",collapsible:s="offcanvas",className:o,children:i,...d},f)=>{const{isMobile:b,state:x,openMobile:u,setOpenMobile:l}=D();return s==="none"?e.jsx("div",{className:n("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",o),ref:f,...d,children:i}):b?e.jsx(Za,{open:u,onOpenChange:l,...d,children:e.jsx(Oe,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":cs},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):e.jsxs("div",{ref:f,className:"group peer hidden md:block text-sidebar-foreground","data-state":x,"data-collapsible":x==="collapsed"?s:"","data-variant":a,"data-side":t,children:[e.jsx("div",{className:n("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:n("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",o),...d,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});Ve.displayName="Sidebar";const He=r.forwardRef(({className:t,onClick:a,...s},o)=>{const{toggleSidebar:i}=D();return e.jsxs(j,{ref:o,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:n("h-7 w-7",t),onClick:d=>{a==null||a(d),i()},...s,children:[e.jsx(ta,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});He.displayName="SidebarTrigger";const fs=r.forwardRef(({className:t,...a},s)=>{const{toggleSidebar:o}=D();return e.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:o,title:"Toggle Sidebar",className:n("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...a})});fs.displayName="SidebarRail";const Qe=r.forwardRef(({className:t,...a},s)=>e.jsx("main",{ref:s,className:n("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...a}));Qe.displayName="SidebarInset";const ps=r.forwardRef(({className:t,...a},s)=>e.jsx(_e,{ref:s,"data-sidebar":"input",className:n("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...a}));ps.displayName="SidebarInput";const Fe=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"header",className:n("flex flex-col gap-2 p-2",t),...a}));Fe.displayName="SidebarHeader";const xs=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"footer",className:n("flex flex-col gap-2 p-2",t),...a}));xs.displayName="SidebarFooter";const bs=r.forwardRef(({className:t,...a},s)=>e.jsx(ze,{ref:s,"data-sidebar":"separator",className:n("mx-2 w-auto bg-sidebar-border",t),...a}));bs.displayName="SidebarSeparator";const Ue=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"content",className:n("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...a}));Ue.displayName="SidebarContent";const Ke=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"group",className:n("relative flex w-full min-w-0 flex-col p-2",t),...a}));Ke.displayName="SidebarGroup";const Ge=r.forwardRef(({className:t,asChild:a=!1,...s},o)=>{const i=a?R:"div";return e.jsx(i,{ref:o,"data-sidebar":"group-label",className:n("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...s})});Ge.displayName="SidebarGroupLabel";const gs=r.forwardRef(({className:t,asChild:a=!1,...s},o)=>{const i=a?R:"button";return e.jsx(i,{ref:o,"data-sidebar":"group-action",className:n("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...s})});gs.displayName="SidebarGroupAction";const hs=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"group-content",className:n("w-full text-sm",t),...a}));hs.displayName="SidebarGroupContent";const V=r.forwardRef(({className:t,...a},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu",className:n("flex w-full min-w-0 flex-col gap-1",t),...a}));V.displayName="SidebarMenu";const A=r.forwardRef(({className:t,...a},s)=>e.jsx("li",{ref:s,"data-sidebar":"menu-item",className:n("group/menu-item relative",t),...a}));A.displayName="SidebarMenuItem";const vs=T("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),H=r.forwardRef(({asChild:t=!1,isActive:a=!1,variant:s="default",size:o="default",tooltip:i,className:d,...f},b)=>{const x=t?R:"button",{isMobile:u,state:l}=D(),g=e.jsx(x,{ref:b,"data-sidebar":"menu-button","data-size":o,"data-active":a,className:n(vs({variant:s,size:o}),d),...f});return i?(typeof i=="string"&&(i={children:i}),e.jsxs(os,{children:[e.jsx(ns,{asChild:!0,children:g}),e.jsx(Pe,{side:"right",align:"center",hidden:l!=="collapsed"||u,...i})]})):g});H.displayName="SidebarMenuButton";const qe=r.forwardRef(({className:t,asChild:a=!1,showOnHover:s=!1,...o},i)=>{const d=a?R:"button";return e.jsx(d,{ref:i,"data-sidebar":"menu-action",className:n("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...o})});qe.displayName="SidebarMenuAction";const ws=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:n("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...a}));ws.displayName="SidebarMenuBadge";const We=r.forwardRef(({className:t,showIcon:a=!1,...s},o)=>{const i=r.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:o,"data-sidebar":"menu-skeleton",className:n("rounded-md h-8 flex gap-2 px-2 items-center",t),...s,children:[a&&e.jsx(K,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(K,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});We.displayName="SidebarMenuSkeleton";const Xe=r.forwardRef(({className:t,...a},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:n("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...a}));Xe.displayName="SidebarMenuSub";const Je=r.forwardRef(({...t},a)=>e.jsx("li",{ref:a,...t}));Je.displayName="SidebarMenuSubItem";const Ye=r.forwardRef(({asChild:t=!1,size:a="md",isActive:s,className:o,...i},d)=>{const f=t?R:"a";return e.jsx(f,{ref:d,"data-sidebar":"menu-sub-button","data-size":a,"data-active":s,className:n("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",o),...i})});Ye.displayName="SidebarMenuSubButton";const js=Nt,ys=St,Ns=Rt;function Ss(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((t,a)=>e.jsx(A,{children:e.jsx(We,{showIcon:!0})},a))})}function Rs({items:t,loading:a,onTableSelect:s}){return e.jsxs(Ke,{children:[e.jsxs(Ge,{children:["Tables (",Object.keys(t).length||0,")"]}),e.jsxs(V,{children:[a&&e.jsx(Ss,{}),!a&&Object.keys(t).map(o=>{var i,d;return e.jsx(js,{asChild:!0,children:e.jsxs(A,{children:[e.jsx(H,{asChild:!0,tooltip:o,children:e.jsxs("a",{href:"#",onClick:()=>s(o),children:[e.jsx(aa,{}),e.jsx("span",{children:o})]})}),(i=t[o])!=null&&i.length?e.jsxs(e.Fragment,{children:[e.jsx(ys,{asChild:!0,children:e.jsxs(qe,{className:"data-[state=open]:rotate-90",children:[e.jsx(sa,{}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})}),e.jsx(Ns,{children:e.jsx(Xe,{className:"pr-0 mr-0",children:(d=t[o])==null?void 0:d.map(f=>e.jsx(Je,{children:e.jsx(Ye,{asChild:!0,children:e.jsxs("div",{className:"flex justify-between",children:[f.name," ",f.type_name&&e.jsx(I,{variant:"secondary",children:f.type_name})]})})},f.name))})})]}):null]})},o)})]})]})}function Ts({onTableSelect:t,...a}){const[s,o]=r.useState({}),[i,d]=r.useState(!0),f=b=>{const u=`SELECT ${s[b].map(l=>l.name).join(",")} FROM ${b} LIMIT 10`;t(u)};return r.useEffect(()=>{(async()=>{try{const x=await va();o(x)}catch(x){console.error("Ошибка при загрузке таблиц:",x)}finally{d(!1)}})()},[]),e.jsxs(Ve,{variant:"inset",...a,children:[e.jsx(Fe,{children:e.jsx(V,{children:e.jsx(A,{children:e.jsx(H,{size:"lg",asChild:!0,children:e.jsxs("a",{href:"#",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:e.jsx(ra,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"SQL Viewer"}),e.jsx("span",{className:"truncate text-xs",children:"for Laravel"})]})]})})})})}),e.jsx(Ue,{children:e.jsx(Rs,{items:s,loading:i,onTableSelect:f})})]})}const Cs=T("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ze=r.forwardRef(({className:t,variant:a,...s},o)=>e.jsx("div",{ref:o,role:"alert",className:n(Cs({variant:a}),t),...s}));Ze.displayName="Alert";const et=r.forwardRef(({className:t,...a},s)=>e.jsx("h5",{ref:s,className:n("mb-1 font-medium leading-none tracking-tight",t),...a}));et.displayName="AlertTitle";const tt=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:n("text-sm [&_p]:leading-relaxed",t),...a}));tt.displayName="AlertDescription";function ks(t){try{return ca(t,{useTabs:!1,keywordCase:"upper",tabWidth:2,expressionWidth:100,linesBetweenQueries:1})}catch{return t}}function Es(){const[t,a]=r.useState(()=>localStorage.getItem("theme")||"light"),[s,o]=r.useState(""),[i,d]=r.useState(null),[f,b]=r.useState(null);r.useEffect(()=>{t==="dark"&&document.documentElement.classList.add("dark")},[]);const x=()=>{const m=t==="light"?"dark":"light";a(m),localStorage.setItem("theme",m),document.documentElement.classList.toggle("dark")},u=m=>{d(m),b(null)},l=m=>{b(m),d(null)},g=m=>{const h=ks(m);o(h)};return e.jsxs($e,{children:[e.jsx(Ts,{onTableSelect:g}),e.jsxs(Qe,{children:[e.jsxs("header",{className:"flex h-16 shrink-0 items-center gap-2",children:[e.jsx("div",{className:"flex flex-1 items-center gap-2 px-4",children:e.jsx(He,{className:"-ml-1"})}),e.jsx("div",{className:"ml-auto px-3",children:e.jsx(Ga,{theme:t,onToggle:x})})]}),e.jsx("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:e.jsxs(ua,{direction:"vertical",children:[e.jsx(F,{className:"p-0",defaultSize:40,minSize:20,children:e.jsx(ja,{query:s,onQueryChange:o,onQueryResult:u,onError:l})}),e.jsx("div",{children:e.jsx(ma,{withHandle:!0})}),e.jsx(F,{defaultSize:60,minSize:20,children:f?e.jsx("div",{className:"p-4",children:e.jsxs(Ze,{variant:"destructive",children:[e.jsx(oa,{className:"h-4 w-4"}),e.jsx(et,{children:"Error"}),e.jsx(tt,{children:f})]})}):e.jsx(Ka,{results:i})})]})}),e.jsx(Ja,{})]})]})}at.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(Es,{})}));
